  - platform: template
    switches:
      test_mqtt:
        friendly_name: "MQTT test"
        value_template: "{{  is_state('binary_sensor.mqtt_test', 'on') }}"
        turn_on:
          service: mqtt.publish
          data_template:
            topic: "switches/test_mqtt"
            payload_template: 'ON'
        turn_off:
          service: mqtt.publish
          data_template:
            topic: "switches/test_mqtt"
            payload_template: 'OFF'
        icon_template: >-
          {% if is_state('switch.heater_mode', 'on') %}
            mdi:power-plug
          {% else %}
            mdi:power-plug-off
          {% endif %}